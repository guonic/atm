# Data Ingestor Configuration
# This file defines data ingestion tasks

database:
  host: localhost
  port: 5432
  user: quant
  password: quant123
  database: quant_db
  schema: quant

tasks:
  # Example: Stock basic information collector
  - name: stock_basic_collector
    enabled: true
    schedule: "0 9 * * *"  # Run daily at 9 AM
    source:
      type: http
      url: "https://api.example.com/stocks/basic"
      headers:
        Authorization: "Bearer YOUR_API_KEY"
        Content-Type: "application/json"
      params:
        method: GET
        data_path: "data.items"  # Extract data.items array from response
        pagination:
          page_param: page
          page_size_param: page_size
          page_size: 100
          max_pages: 10
          delay: 1  # Delay between pages in seconds
      timeout: 30
      retry_count: 3
      retry_delay: 1
    table: stock_basic
    batch_size: 1000
    on_conflict: update  # update, ignore, or error

  # Example: Stock price data collector
  - name: stock_price_collector
    enabled: true
    schedule: "*/5 * * * *"  # Run every 5 minutes
    source:
      type: http
      url: "https://api.example.com/stocks/prices"
      headers:
        Authorization: "Bearer YOUR_API_KEY"
      params:
        method: GET
        data_path: "prices"
      timeout: 30
      retry_count: 3
      retry_delay: 1
    table: stock_kline_1min
    batch_size: 500
    on_conflict: update

  # Example: Market data collector
  - name: market_data_collector
    enabled: false  # Disabled by default
    schedule: "0 * * * *"  # Run every hour
    source:
      type: http
      url: "https://api.example.com/market/data"
      headers:
        Authorization: "Bearer YOUR_API_KEY"
      params:
        method: POST
        params:
          date: "2024-01-01"  # Can be overridden at runtime
      timeout: 60
      retry_count: 5
      retry_delay: 2
    table: market_data
    batch_size: 2000
    on_conflict: ignore

