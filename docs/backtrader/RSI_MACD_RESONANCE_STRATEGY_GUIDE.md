# RSI + MACD 共振交易策略指南

## 概述

RSI + MACD 共振策略是一个结合了 RSI（相对强弱指标）和 MACD（移动平均收敛散度）的高胜率交易框架。该策略通过"双重验证，共振为王"的核心思想，将两个不同维度的指标结合起来，显著过滤市场噪音，将交易机会从模糊的"区域"压缩到精确的"时间点"。

**核心哲学**：双指标验证，共振为王。迫使交易者放弃对单一指标的依赖，只有当两个来自不同维度的工具达成共识时才行动。

## 策略原理

### 一、为何单独使用它们总会"差点意思"？

#### 1. RSI 的"钝化陷阱"
- RSI 是震荡指标，在 0-100 之间波动
- 擅长识别超买（通常 >70）和超卖（通常 <30）区域
- **问题**：在强势单边趋势中，RSI 可能在超买或超卖区域"钝化"很长时间
- 如果仅凭 RSI 超买就卖出，可能错过主升浪
- 如果仅凭 RSI 超卖就买入，可能"接飞刀"在半山腰
- **结论**：RSI 无法指示趋势的强度和持续性

#### 2. MACD 的"信号滞后"与"震荡噪音"
- MACD 是趋势指标，核心是 DIF 和 DEA 双线动态以及柱状图（BAR）
- **问题 1**：金叉和死叉信号相对滞后
- **问题 2**：在震荡市场中，双线频繁交叉，产生大量虚假"趋势信号"，导致交易者反复止损
- **问题 3**：MACD 对极端短期市场情绪缺乏敏感性

### 二、RSI 与 MACD 的"天作之合"：定位、定性与确认

两者的结合完美互补，形成完整的决策链条：**定位 → 定性 → 确认**

#### 1. RSI 负责"定位战场"与"预警背离"

**定位支撑区**：
- 当股价下跌，RSI 进入或接近超卖区（如 <30）
- 这表示市场可能进入"短期情绪过度释放"的区域
- **注意**：这仅仅是观察区，**绝对不是立即买入的信号**

**预警背离**（RSI 的精髓）：
- **底背离**：股价创新低，但 RSI 的低点比前一个低点更高
  - 暗示下跌动量"暗中减弱"
- **顶背离**：股价创新高，但 RSI 的高点比前一个高点更低
  - 暗示上涨动量"减弱"
- **重要**：背离是"强烈的早期预警"，但**不是行动命令**

#### 2. MACD 负责"定性趋势"与"确认动能"

**定性趋势状态**：
- 观察 MACD 双线是"零轴上方（牛市）"还是"零轴下方（熊市）"
- 观察双线是"发散"还是"收敛"
- 这**决定了我们的主要交易方向**

**确认动能转折**：
- **等待 MACD 发出与 RSI 预警方向一致的动量确认信号**
- 这是**整个系统的核心交易触发点**

## 实战三步法：构建"共振"交易信号

### 以下以捕捉底部反弹机会为例（顶部反之亦然）

#### 第一步：RSI 发出"定位"与"预警"信号

**场景**：
- 股价经历一段下跌，RSI 进入超卖区（如 <30）
- 随后，股价再次下跌，创出阶段性新低，但 RSI 的低点"未创新低"，形成"底背离"

**行动**：
- 此时，**你将这只股票加入高观察名单**
- **绝对不要行动**
- 这**仅仅意味着下跌力量内部出现了裂痕**

#### 第二步：MACD 进行"定性"与"过滤"

**检查内容**：
- 同时检查 MACD 的状态

**理想条件**：
1. **MACD 柱状图（BAR）底背离**：
   - 股价创新低，但"绿色动量柱"的"面积"或"长度"显著缩小
   - 暗示做空动量减弱，比双线背离更敏感
2. **双线位置**：
   - 理想情况下，MACD 的 DIF 和 DEA 线已经在零轴下方较深
   - 表示有较大的反弹空间

**这一步的目的**：
- 过滤掉无效信号：RSI 可能显示背离，但 MACD 的下跌动量仍然强劲，价格可能继续下跌

#### 第三步：等待"共振确认"信号——这才是入场点

**条件**：
- RSI 底背离已确立
- MACD 动量柱开始缩小
- 需要两者发出明确的"共振"激活信号

**经典组合（入场信号）**：
- RSI 从超卖区（通常 <30）向上，突破 50 强弱分界线（或至少稳定在 30 以上）
- 同时，MACD 在低位形成"金叉"（DIF 上穿 DEA）
- 这一点是**多空动量正式转换的共振点**

**更优选择（更敏感的入场信号）**：
- RSI 底背离后，其低点向上转折
- 对应 MACD 动量柱（BAR）从绿色（空头动量）转为红色（多头动量）的精确时刻
- 这个信号往往比传统双线金叉更早、更敏感

### 出场与风控

**止损**：
- 止损单应设置在形成共振入场信号对应的 K 线最低点下方
- 也可以使用 ATR 倍数（如 2×ATR）作为止损距离

**离场**：
- 可以参考后续的"共振顶部信号"离场，包括：
  - RSI 顶背离
  - MACD 死叉
  - MACD 红色柱缩小（上涨动量减弱）

## 策略参数

### RSI 参数
- `rsi_period`: RSI 计算周期（默认：14）
- `rsi_oversold`: RSI 超卖阈值（默认：30）
- `rsi_overbought`: RSI 超买阈值（默认：70）
- `rsi_midline`: RSI 强弱分界线（默认：50）

### MACD 参数
- `macd_fast`: MACD 快线周期（默认：12）
- `macd_slow`: MACD 慢线周期（默认：26）
- `macd_signal`: MACD 信号线周期（默认：9）

### 策略参数
- `divergence_lookback`: 背离检测回看周期（默认：20）
- `use_sensitive_entry`: 使用敏感入场信号（MACD 柱颜色变化）（默认：True）
- `stop_loss_atr_multiplier`: 止损 ATR 倍数（默认：2.0）

## 使用示例

### 基本使用

```bash
python python/tools/analysis/evaluate_rsi_macd_resonance_strategy.py \
    --start-date 2023-01-01 \
    --end-date 2024-01-01 \
    --num-stocks 100 \
    --skip-market-cap-filter
```

### 自定义参数

```bash
python python/tools/analysis/evaluate_rsi_macd_resonance_strategy.py \
    --start-date 2023-01-01 \
    --end-date 2024-01-01 \
    --num-stocks 100 \
    --skip-market-cap-filter \
    --rsi-period 14 \
    --rsi-oversold 30 \
    --rsi-overbought 70 \
    --macd-fast 12 \
    --macd-slow 26 \
    --macd-signal 9 \
    --divergence-lookback 20 \
    --use-sensitive-entry \
    --stop-loss-atr-multiplier 2.0
```

### 使用经典入场信号

```bash
python python/tools/analysis/evaluate_rsi_macd_resonance_strategy.py \
    --start-date 2023-01-01 \
    --end-date 2024-01-01 \
    --num-stocks 100 \
    --skip-market-cap-filter \
    --no-sensitive-entry
```

## 策略特点

1. **双重验证**：RSI 和 MACD 必须同时发出信号才入场
2. **共振确认**：两个不同维度的指标达成共识
3. **过滤噪音**：显著减少虚假信号
4. **精确入场**：将交易机会从"区域"压缩到"时间点"
5. **风险控制**：严格的止损和离场规则

## 注意事项

1. **不保证每次盈利**：策略通过严谨的规则，将交易建立在"高概率事件"的基础上
2. **规则一致性**：所有指标都是历史的影子，真正的"圣杯"在于对规则的一致执行
3. **风险敬畏**：必须做好资金管理与风险控制
4. **市场环境**：市场环境复杂多变，单一策略无法适应所有情况
5. **独立决策**：投资者应结合自身情况独立决策

## 风险提示

本文所述 RSI 与 MACD 组合策略为技术分析方法论分享，所有信号均基于历史数据统计，存在失效可能。市场环境复杂多变，单一策略无法适应所有情况。投资者应深知金融投资风险，结合自身情况独立决策，并务必做好资金管理与风险控制。**市场有风险，入市须谨慎。**

